var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c,a;function l(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function s(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode&&t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function m(){return p(" ")}function g(){return p("")}function h(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t){return""===t?null:+t}function v(t,e){e=""+e,t.data!==e&&(t.data=e)}function x(t,e){t.value=null==e?"":e}function b(t){a=t}function w(t){(function(){if(!a)throw new Error("Function called outside component initialization");return a})().$$.on_mount.push(t)}const C=[],_=[];let k=[];const D=[],E=Promise.resolve();let I=!1;function N(t){k.push(t)}const L=new Set;let q=0;function F(){if(0!==q)return;const t=a;do{try{for(;q<C.length;){const t=C[q];q++,b(t),O(t.$$)}}catch(t){throw C.length=0,q=0,t}for(b(null),C.length=0,q=0;_.length;)_.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];L.has(e)||(L.add(e),e())}k.length=0}while(C.length);for(;D.length;)D.pop()();I=!1,L.clear(),b(t)}function O(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const P=new Set;let S;function U(){S={r:0,c:[],p:S}}function j(){S.r||r(S.c),S=S.p}function z(t,e){t&&t.i&&(P.delete(t),t.i(e))}function T(t,e,n,r){if(t&&t.o){if(P.has(t))return;P.add(t),S.c.push((()=>{P.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function A(t){t&&t.c()}function B(t,n,i,c){const{fragment:a,after_update:l}=t.$$;a&&a.m(n,i),c||N((()=>{const n=t.$$.on_mount.map(e).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...n):r(n),t.$$.on_mount=[]})),l.forEach(N)}function R(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];k.forEach((r=>-1===t.indexOf(r)?e.push(r):n.push(r))),n.forEach((t=>t())),k=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e){-1===t.$$.dirty[0]&&(C.push(t),I||(I=!0,E.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function M(e,o,i,c,l,s,u,d=[-1]){const p=a;b(e);const m=e.$$={fragment:null,ctx:[],props:s,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||p.$$.root};u&&u(m.root);let g=!1;if(m.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return m.ctx&&l(m.ctx[t],m.ctx[t]=o)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](o),g&&H(e,t)),n})):[],m.update(),g=!0,r(m.before_update),m.fragment=!!c&&c(m.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);m.fragment&&m.fragment.l(t),t.forEach(f)}else m.fragment&&m.fragment.c();o.intro&&z(e.$$.fragment),B(e,o.target,o.anchor,o.customElement),F()}b(p)}class J{$destroy(){R(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function K(e){let n,o,i,c,a,l,g,y,v;return{c(){n=d("p"),n.textContent="Schreiben mir, was ich am Bild verändern soll",o=m(),i=d("form"),c=d("input"),a=m(),l=d("button"),g=p("Feedback senden"),$(c,"type","text"),c.required=!0,l.disabled=e[1]},m(t,r){u(t,n,r),u(t,o,r),u(t,i,r),s(i,c),x(c,e[0]),s(i,a),s(i,l),s(l,g),y||(v=[h(c,"input",e[5]),h(l,"click",e[2])],y=!0)},p(t,[e]){1&e&&c.value!==t[0]&&x(c,t[0]),2&e&&(l.disabled=t[1])},i:t,o:t,d(t){t&&f(n),t&&f(o),t&&f(i),y=!1,r(v)}}}function G(t,e,n){let{pictureId:r}=e,{loadPicture:o}=e,i="",c=!1;return t.$$set=t=>{"pictureId"in t&&n(3,r=t.pictureId),"loadPicture"in t&&n(4,o=t.loadPicture)},t.$$.update=()=>{t.$$.dirty},[i,c,async function(t){if(t.preventDefault(),!c){n(1,c=!0);try{const e=await fetch("/feedback/"+r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:i})});if(!e.ok)throw alert("Es ist ein Fehler aufgetreten"),new Error("Error");const c=await e.json();n(3,r=c.pictureId),o(t)}catch(t){console.error("Fetch error:",t)}finally{n(1,c=!1),n(0,i="")}}},r,o,function(){i=this.value,n(0,i)}]}class Q extends J{constructor(t){super(),M(this,t,G,K,i,{pictureId:3,loadPicture:4})}}function V(t){let e,n,r,o,i,c,a;function p(e){t[4](e)}let g={loadPicture:t[2]};return void 0!==t[1]&&(g.pictureId=t[1]),e=new Q({props:g}),_.push((()=>function(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}(e,"pictureId",p))),{c(){A(e.$$.fragment),r=m(),o=d("div"),i=d("img"),l(i.src,c=t[0])||$(i,"src",c),$(i,"alt","Fetched Image"),$(i,"class","fetched-image svelte-1wwzqs1"),$(o,"class","image-container svelte-1wwzqs1")},m(t,n){B(e,t,n),u(t,r,n),u(t,o,n),s(o,i),a=!0},p(t,r){const o={};var s;!n&&2&r&&(n=!0,o.pictureId=t[1],s=()=>n=!1,D.push(s)),e.$set(o),(!a||1&r&&!l(i.src,c=t[0]))&&$(i,"src",c)},i(t){a||(z(e.$$.fragment,t),a=!0)},o(t){T(e.$$.fragment,t),a=!1},d(t){R(e,t),t&&f(r),t&&f(o)}}}function W(t){let e,n,o,i,c,a,l,p,g,v=t[0]&&V(t);return{c(){e=d("main"),n=d("form"),o=d("input"),i=m(),c=d("button"),c.textContent="Foto anzeigen",a=m(),v&&v.c(),$(o,"type","number"),$(o,"class","svelte-1wwzqs1"),$(c,"class","svelte-1wwzqs1"),$(n,"class","svelte-1wwzqs1"),$(e,"class","svelte-1wwzqs1")},m(r,f){u(r,e,f),s(e,n),s(n,o),x(o,t[1]),s(n,i),s(n,c),s(e,a),v&&v.m(e,null),l=!0,p||(g=[h(o,"input",t[3]),h(c,"click",t[2])],p=!0)},p(t,[n]){2&n&&y(o.value)!==t[1]&&x(o,t[1]),t[0]?v?(v.p(t,n),1&n&&z(v,1)):(v=V(t),v.c(),z(v,1),v.m(e,null)):v&&(U(),T(v,1,1,(()=>{v=null})),j())},i(t){l||(z(v),l=!0)},o(t){T(v),l=!1},d(t){t&&f(e),v&&v.d(),p=!1,r(g)}}}function X(t,e,n){let r,o="";return[o,r,function(t){t.preventDefault(),fetch("/picture/"+r).then((t=>{if(!t.ok)throw alert("Kein Bild verfügbar mit dieser Nummer!"),new Error("No picture found: "+t.statusText);return t.blob()})).then((t=>{n(0,o=URL.createObjectURL(t))})).catch((t=>{console.error("Fetch error:",t)}))},function(){r=y(this.value),n(1,r)},function(t){r=t,n(1,r)}]}class Y extends J{constructor(t){super(),M(this,t,X,W,i,{})}}function Z(t,e,n){const r=t.slice();return r[7]=e[n],r[9]=n,r}function tt(e){let n;return{c(){n=d("p"),n.textContent="No image available."},m(t,e){u(t,n,e)},p:t,d(t){t&&f(n)}}}function et(t){let e,n,r,o,i;function c(){return t[4](t[7])}return{c(){e=d("img"),l(e.src,n=t[7].imageUrl)||$(e,"src",n),$(e,"alt",r=`Image generated from prompt: ${t[7].prompt}`),$(e,"class","thumbnail svelte-1ndinyr")},m(t,n){u(t,e,n),o||(i=h(e,"click",c),o=!0)},p(o,i){t=o,1&i&&!l(e.src,n=t[7].imageUrl)&&$(e,"src",n),1&i&&r!==(r=`Image generated from prompt: ${t[7].prompt}`)&&$(e,"alt",r)},d(t){t&&f(e),o=!1,i()}}}function nt(t){let e,n,r,o,i,c,a,l,g,h,y,x,b,w,C,_,k,D,E,I,N,L,q,F,O,P,S,U,j,z,T,A,B,R,H,M,J,K,G,Q,V,W,X,Y,Z,nt,rt,ot,it,ct,at,lt,st=new Date(t[7].created).toLocaleString()+"",ut=t[7].prompt+"",ft=t[7].pictureId+"",dt=t[7].originalData.brightness+"",pt=t[7].originalData.latitude+"",mt=t[7].originalData.longitude+"",gt=t[7].originalData.temperature+"",ht=t[7].originalData.population+"",$t=t[7].originalData.colorscheme+"",yt=t[7].originalData.style+"";function vt(t,e){return t[7].imageUrl?et:tt}let xt=vt(t),bt=xt(t);return{c(){e=d("li"),n=d("div"),r=d("p"),o=d("strong"),o.textContent="Created:",i=m(),c=p(st),a=m(),l=d("p"),g=d("strong"),g.textContent="Prompt:",h=m(),y=p(ut),x=m(),b=d("p"),w=d("strong"),w.textContent="Picture ID:",C=m(),_=p(ft),k=m(),D=d("details"),E=d("summary"),E.innerHTML="<strong>Original Data:</strong>",I=m(),N=d("ul"),L=d("li"),q=d("strong"),q.textContent="Brightness: ",F=p(dt),O=m(),P=d("li"),S=d("strong"),S.textContent="Latitude: ",U=p(pt),j=m(),z=d("li"),T=d("strong"),T.textContent="Longitude: ",A=p(mt),B=m(),R=d("li"),H=d("strong"),H.textContent="Temperature: ",M=p(gt),J=p("°C"),K=m(),G=d("li"),Q=d("strong"),Q.textContent="Population Density: ",V=p(ht),W=m(),X=d("li"),Y=d("strong"),Y.textContent="Color Scheme: ",Z=p($t),nt=m(),rt=d("li"),ot=d("strong"),ot.textContent="Style: ",it=p(yt),ct=m(),at=d("div"),bt.c(),lt=m(),$(E,"class","svelte-1ndinyr"),$(D,"class","svelte-1ndinyr"),$(n,"class","request-info svelte-1ndinyr"),$(at,"class","image-container svelte-1ndinyr"),$(e,"class","history-item svelte-1ndinyr")},m(t,f){u(t,e,f),s(e,n),s(n,r),s(r,o),s(r,i),s(r,c),s(n,a),s(n,l),s(l,g),s(l,h),s(l,y),s(n,x),s(n,b),s(b,w),s(b,C),s(b,_),s(n,k),s(n,D),s(D,E),s(D,I),s(D,N),s(N,L),s(L,q),s(L,F),s(N,O),s(N,P),s(P,S),s(P,U),s(N,j),s(N,z),s(z,T),s(z,A),s(N,B),s(N,R),s(R,H),s(R,M),s(R,J),s(N,K),s(N,G),s(G,Q),s(G,V),s(N,W),s(N,X),s(X,Y),s(X,Z),s(N,nt),s(N,rt),s(rt,ot),s(rt,it),s(e,ct),s(e,at),bt.m(at,null),s(e,lt)},p(t,e){1&e&&st!==(st=new Date(t[7].created).toLocaleString()+"")&&v(c,st),1&e&&ut!==(ut=t[7].prompt+"")&&v(y,ut),1&e&&ft!==(ft=t[7].pictureId+"")&&v(_,ft),1&e&&dt!==(dt=t[7].originalData.brightness+"")&&v(F,dt),1&e&&pt!==(pt=t[7].originalData.latitude+"")&&v(U,pt),1&e&&mt!==(mt=t[7].originalData.longitude+"")&&v(A,mt),1&e&&gt!==(gt=t[7].originalData.temperature+"")&&v(M,gt),1&e&&ht!==(ht=t[7].originalData.population+"")&&v(V,ht),1&e&&$t!==($t=t[7].originalData.colorscheme+"")&&v(Z,$t),1&e&&yt!==(yt=t[7].originalData.style+"")&&v(it,yt),xt===(xt=vt(t))&&bt?bt.p(t,e):(bt.d(1),bt=xt(t),bt&&(bt.c(),bt.m(at,null)))},d(t){t&&f(e),bt.d()}}}function rt(t){let e,n,r,o,i;return{c(){e=d("div"),n=d("img"),l(n.src,r=t[1])||$(n,"src",r),$(n,"alt","Fullscreen image"),$(n,"class","fullscreen-image svelte-1ndinyr"),$(e,"class","fullscreen-overlay svelte-1ndinyr")},m(r,c){u(r,e,c),s(e,n),o||(i=h(e,"click",t[3]),o=!0)},p(t,e){2&e&&!l(n.src,r=t[1])&&$(n,"src",r)},d(t){t&&f(e),o=!1,i()}}}function ot(e){let n,r,o,i,c,a=e[0],l=[];for(let t=0;t<a.length;t+=1)l[t]=nt(Z(e,a,t));let s=e[1]&&rt(e);return{c(){n=d("h1"),n.textContent="History",r=m(),o=d("ul");for(let t=0;t<l.length;t+=1)l[t].c();i=m(),s&&s.c(),c=g(),$(o,"class","history-list svelte-1ndinyr")},m(t,e){u(t,n,e),u(t,r,e),u(t,o,e);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(o,null);u(t,i,e),s&&s.m(t,e),u(t,c,e)},p(t,[e]){if(5&e){let n;for(a=t[0],n=0;n<a.length;n+=1){const r=Z(t,a,n);l[n]?l[n].p(r,e):(l[n]=nt(r),l[n].c(),l[n].m(o,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=a.length}t[1]?s?s.p(t,e):(s=rt(t),s.c(),s.m(c.parentNode,c)):s&&(s.d(1),s=null)},i:t,o:t,d(t){t&&f(n),t&&f(r),t&&f(o),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(l,t),t&&f(i),s&&s.d(t),t&&f(c)}}}function it(t,e,n){let r=[],o=null;async function i(t,e){try{const o=await fetch("/picture/"+t);if(!o.ok)throw new Error("No picture found: "+o.statusText);const i=await o.blob();n(0,r[e].imageUrl=URL.createObjectURL(i),r)}catch(t){console.error("Fetch error:",t),n(0,r[e].imageUrl=null,r)}}function c(t){n(1,o=t)}w((async()=>{await async function(){try{const t=await fetch("/history");if(t.ok){const e=await t.json();n(0,r=JSON.parse(e));for(let t=0;t<r.length;t++)await i(r[t].pictureId,t)}else console.error("Failed to fetch requests.")}catch(t){console.error("Error fetching data:",t)}}()}));return[r,o,c,function(){n(1,o=null)},t=>c(t.imageUrl)]}class ct extends J{constructor(t){super(),M(this,t,it,ot,i,{})}}function at(e){let n,r,o;return r=new ct({}),{c(){n=d("main"),A(r.$$.fragment),$(n,"class","svelte-28qcwf")},m(t,e){u(t,n,e),B(r,n,null),o=!0},p:t,i(t){o||(z(r.$$.fragment,t),o=!0)},o(t){T(r.$$.fragment,t),o=!1},d(t){t&&f(n),R(r)}}}class lt extends J{constructor(t){super(),M(this,t,null,at,i,{})}}function st(t){let e,n;return e=new Y({}),{c(){A(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},i(t){n||(z(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function ut(t){let e,n;return e=new lt({}),{c(){A(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},i(t){n||(z(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function ft(t){let e,n,o,i,c,a,l,p,y,v,x,b,w,C,_="main"===t[0]&&st(),k="history"===t[0]&&ut();return{c(){e=d("nav"),n=d("div"),o=d("h1"),o.textContent="Lens less",i=m(),c=d("div"),a=d("a"),a.textContent="Main",l=m(),p=d("a"),p.textContent="History",y=m(),_&&_.c(),v=m(),k&&k.c(),x=g(),$(o,"class","svelte-3716tx"),$(a,"href","#"),$(a,"class","svelte-3716tx"),$(p,"href","#"),$(p,"class","svelte-3716tx"),$(c,"class","svelte-3716tx"),$(n,"class","navbar svelte-3716tx"),$(e,"class","svelte-3716tx")},m(r,f){u(r,e,f),s(e,n),s(n,o),s(n,i),s(n,c),s(c,a),s(c,l),s(c,p),u(r,y,f),_&&_.m(r,f),u(r,v,f),k&&k.m(r,f),u(r,x,f),b=!0,w||(C=[h(a,"click",t[2]),h(p,"click",t[3])],w=!0)},p(t,[e]){"main"===t[0]?_?1&e&&z(_,1):(_=st(),_.c(),z(_,1),_.m(v.parentNode,v)):_&&(U(),T(_,1,1,(()=>{_=null})),j()),"history"===t[0]?k?1&e&&z(k,1):(k=ut(),k.c(),z(k,1),k.m(x.parentNode,x)):k&&(U(),T(k,1,1,(()=>{k=null})),j())},i(t){b||(z(_),z(k),b=!0)},o(t){T(_),T(k),b=!1},d(t){t&&f(e),t&&f(y),_&&_.d(t),t&&f(v),k&&k.d(t),t&&f(x),w=!1,r(C)}}}function dt(t,e,n){let r="main";function o(t){n(0,r=t)}return[r,o,()=>o("main"),()=>o("history")]}return new class extends J{constructor(t){super(),M(this,t,dt,ft,i,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
