var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c,a;function l(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function s(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode&&t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function g(){return p(" ")}function m(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t){return""===t?null:+t}function x(t,e){e=""+e,t.data!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}function w(t){a=t}function b(t){(function(){if(!a)throw new Error("Function called outside component initialization");return a})().$$.on_mount.push(t)}const v=[],C=[];let _=[];const D=[],k=Promise.resolve();let E=!1;function I(t){_.push(t)}const L=new Set;let N=0;function P(){if(0!==N)return;const t=a;do{try{for(;N<v.length;){const t=v[N];N++,w(t),q(t.$$)}}catch(t){throw v.length=0,N=0,t}for(w(null),v.length=0,N=0;C.length;)C.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];L.has(e)||(L.add(e),e())}_.length=0}while(v.length);for(;D.length;)D.pop()();E=!1,L.clear(),w(t)}function q(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(I)}}const O=new Set;let S;function F(){S={r:0,c:[],p:S}}function U(){S.r||r(S.c),S=S.p}function j(t,e){t&&t.i&&(O.delete(t),t.i(e))}function z(t,e,n,r){if(t&&t.o){if(O.has(t))return;O.add(t),S.c.push((()=>{O.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function T(t){t&&t.c()}function A(t,n,i,c){const{fragment:a,after_update:l}=t.$$;a&&a.m(n,i),c||I((()=>{const n=t.$$.on_mount.map(e).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...n):r(n),t.$$.on_mount=[]})),l.forEach(I)}function B(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];_.forEach((r=>-1===t.indexOf(r)?e.push(r):n.push(r))),n.forEach((t=>t())),_=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function R(t,e){-1===t.$$.dirty[0]&&(v.push(t),E||(E=!0,k.then(P)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(e,o,i,c,l,s,u,d=[-1]){const p=a;w(e);const g=e.$$={fragment:null,ctx:[],props:s,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||p.$$.root};u&&u(g.root);let m=!1;if(g.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return g.ctx&&l(g.ctx[t],g.ctx[t]=o)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](o),m&&R(e,t)),n})):[],g.update(),m=!0,r(g.before_update),g.fragment=!!c&&c(g.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);g.fragment&&g.fragment.l(t),t.forEach(f)}else g.fragment&&g.fragment.c();o.intro&&j(e.$$.fragment),A(e,o.target,o.anchor,o.customElement),P()}w(p)}class M{$destroy(){B(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function J(e){let n,o,i,c,a,l,$,x,w;return{c(){n=d("p"),n.textContent="Schreiben mir, was ich am Bild verändern soll",o=g(),i=d("form"),c=d("input"),a=g(),l=d("button"),$=p("Feedback senden"),h(c,"type","text"),c.required=!0,l.disabled=e[1]},m(t,r){u(t,n,r),u(t,o,r),u(t,i,r),s(i,c),y(c,e[0]),s(i,a),s(i,l),s(l,$),x||(w=[m(c,"input",e[5]),m(l,"click",e[2])],x=!0)},p(t,[e]){1&e&&c.value!==t[0]&&y(c,t[0]),2&e&&(l.disabled=t[1])},i:t,o:t,d(t){t&&f(n),t&&f(o),t&&f(i),x=!1,r(w)}}}function K(t,e,n){let{pictureId:r}=e,{loadPicture:o}=e,i="",c=!1;return t.$$set=t=>{"pictureId"in t&&n(3,r=t.pictureId),"loadPicture"in t&&n(4,o=t.loadPicture)},t.$$.update=()=>{t.$$.dirty},[i,c,async function(t){if(t.preventDefault(),!c){n(1,c=!0);try{const e=await fetch("/feedback/"+r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:i})});if(!e.ok)throw alert("Es ist ein Fehler aufgetreten"),new Error("Error");const c=await e.json();n(3,r=c.pictureId),o(t)}catch(t){console.error("Fetch error:",t)}finally{n(1,c=!1),n(0,i="")}}},r,o,function(){i=this.value,n(0,i)}]}class G extends M{constructor(t){super(),H(this,t,K,J,i,{pictureId:3,loadPicture:4})}}function Q(t){let e,n,r,o,i,c,a;function p(e){t[4](e)}let m={loadPicture:t[2]};return void 0!==t[1]&&(m.pictureId=t[1]),e=new G({props:m}),C.push((()=>function(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}(e,"pictureId",p))),{c(){T(e.$$.fragment),r=g(),o=d("div"),i=d("img"),l(i.src,c=t[0])||h(i,"src",c),h(i,"alt","Fetched Image"),h(i,"class","fetched-image svelte-1wwzqs1"),h(o,"class","image-container svelte-1wwzqs1")},m(t,n){A(e,t,n),u(t,r,n),u(t,o,n),s(o,i),a=!0},p(t,r){const o={};var s;!n&&2&r&&(n=!0,o.pictureId=t[1],s=()=>n=!1,D.push(s)),e.$set(o),(!a||1&r&&!l(i.src,c=t[0]))&&h(i,"src",c)},i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){z(e.$$.fragment,t),a=!1},d(t){B(e,t),t&&f(r),t&&f(o)}}}function V(t){let e,n,o,i,c,a,l,p,x,w=t[0]&&Q(t);return{c(){e=d("main"),n=d("form"),o=d("input"),i=g(),c=d("button"),c.textContent="Foto anzeigen",a=g(),w&&w.c(),h(o,"type","number"),h(o,"class","svelte-1wwzqs1"),h(c,"class","svelte-1wwzqs1"),h(n,"class","svelte-1wwzqs1"),h(e,"class","svelte-1wwzqs1")},m(r,f){u(r,e,f),s(e,n),s(n,o),y(o,t[1]),s(n,i),s(n,c),s(e,a),w&&w.m(e,null),l=!0,p||(x=[m(o,"input",t[3]),m(c,"click",t[2])],p=!0)},p(t,[n]){2&n&&$(o.value)!==t[1]&&y(o,t[1]),t[0]?w?(w.p(t,n),1&n&&j(w,1)):(w=Q(t),w.c(),j(w,1),w.m(e,null)):w&&(F(),z(w,1,1,(()=>{w=null})),U())},i(t){l||(j(w),l=!0)},o(t){z(w),l=!1},d(t){t&&f(e),w&&w.d(),p=!1,r(x)}}}function W(t,e,n){let r,o="";return[o,r,function(t){t.preventDefault(),fetch("/picture/"+r).then((t=>{if(!t.ok)throw alert("Kein Bild verfügbar mit dieser Nummer!"),new Error("No picture found: "+t.statusText);return t.blob()})).then((t=>{n(0,o=URL.createObjectURL(t))})).catch((t=>{console.error("Fetch error:",t)}))},function(){r=$(this.value),n(1,r)},function(t){r=t,n(1,r)}]}class X extends M{constructor(t){super(),H(this,t,W,V,i,{})}}function Y(t,e,n){const r=t.slice();return r[3]=e[n],r[5]=n,r}function Z(e){let n;return{c(){n=d("p"),n.textContent="No image available."},m(t,e){u(t,n,e)},p:t,d(t){t&&f(n)}}}function tt(t){let e,n;return{c(){e=d("img"),l(e.src,n=t[3].imageUrl)||h(e,"src",n),h(e,"alt","Picture"),h(e,"class","thumbnail svelte-nwgglm")},m(t,n){u(t,e,n)},p(t,r){1&r&&!l(e.src,n=t[3].imageUrl)&&h(e,"src",n)},d(t){t&&f(e)}}}function et(t){let e,n,r,o,i,c,a,l,m,h,$,y,w,b,v,C,_,D,k,E,I,L,N,P,q,O,S,F,U,j,z,T,A,B,R,H,M,J,K,G,Q,V,W,X,Y,et,nt,rt,ot,it,ct,at,lt,st,ut,ft,dt,pt,gt,mt,ht,$t,xt,yt=new Date(t[3].created).toLocaleString()+"",wt=t[3].prompt+"",bt=t[3].pictureId+"",vt=t[3].originalData.brightness+"",Ct=t[3].originalData.latitude+"",_t=t[3].originalData.longitude+"",Dt=t[3].originalData.temperature+"",kt=t[3].originalData.population+"",Et=t[3].originalData.colorscheme+"",It=t[3].originalData.style+"";function Lt(t,e){return t[3].imageUrl?tt:Z}let Nt=Lt(t),Pt=Nt(t);return{c(){e=d("li"),n=d("p"),r=d("strong"),r.textContent="Created:",o=g(),i=p(yt),c=g(),a=d("p"),l=d("strong"),l.textContent="Prompt:",m=g(),h=p(wt),$=g(),y=d("p"),w=d("strong"),w.textContent="Picture ID:",b=g(),v=p(bt),C=g(),_=d("p"),_.innerHTML="<strong>Original Data:</strong>",D=g(),k=d("ul"),E=d("li"),I=d("strong"),I.textContent="Brightness:",L=g(),N=d("p"),P=p(vt),q=g(),O=d("li"),S=d("strong"),S.textContent="Latitude:",F=g(),U=d("p"),j=p(Ct),z=g(),T=d("li"),A=d("strong"),A.textContent="Longitude:",B=g(),R=d("p"),H=p(_t),M=g(),J=d("li"),K=d("strong"),K.textContent="Temperature:",G=g(),Q=d("p"),V=p(Dt),W=p("°C"),X=g(),Y=d("li"),et=d("strong"),et.textContent="Population Density:",nt=g(),rt=d("p"),ot=p(kt),it=g(),ct=d("li"),at=d("strong"),at.textContent="Color Scheme:",lt=g(),st=d("p"),ut=p(Et),ft=g(),dt=d("li"),pt=d("strong"),pt.textContent="Style:",gt=g(),mt=d("p"),ht=p(It),$t=g(),Pt.c(),xt=g()},m(t,f){u(t,e,f),s(e,n),s(n,r),s(n,o),s(n,i),s(e,c),s(e,a),s(a,l),s(a,m),s(a,h),s(e,$),s(e,y),s(y,w),s(y,b),s(y,v),s(e,C),s(e,_),s(e,D),s(e,k),s(k,E),s(E,I),s(E,L),s(E,N),s(N,P),s(k,q),s(k,O),s(O,S),s(O,F),s(O,U),s(U,j),s(k,z),s(k,T),s(T,A),s(T,B),s(T,R),s(R,H),s(k,M),s(k,J),s(J,K),s(J,G),s(J,Q),s(Q,V),s(Q,W),s(k,X),s(k,Y),s(Y,et),s(Y,nt),s(Y,rt),s(rt,ot),s(k,it),s(k,ct),s(ct,at),s(ct,lt),s(ct,st),s(st,ut),s(k,ft),s(k,dt),s(dt,pt),s(dt,gt),s(dt,mt),s(mt,ht),s(e,$t),Pt.m(e,null),s(e,xt)},p(t,n){1&n&&yt!==(yt=new Date(t[3].created).toLocaleString()+"")&&x(i,yt),1&n&&wt!==(wt=t[3].prompt+"")&&x(h,wt),1&n&&bt!==(bt=t[3].pictureId+"")&&x(v,bt),1&n&&vt!==(vt=t[3].originalData.brightness+"")&&x(P,vt),1&n&&Ct!==(Ct=t[3].originalData.latitude+"")&&x(j,Ct),1&n&&_t!==(_t=t[3].originalData.longitude+"")&&x(H,_t),1&n&&Dt!==(Dt=t[3].originalData.temperature+"")&&x(V,Dt),1&n&&kt!==(kt=t[3].originalData.population+"")&&x(ot,kt),1&n&&Et!==(Et=t[3].originalData.colorscheme+"")&&x(ut,Et),1&n&&It!==(It=t[3].originalData.style+"")&&x(ht,It),Nt===(Nt=Lt(t))&&Pt?Pt.p(t,n):(Pt.d(1),Pt=Nt(t),Pt&&(Pt.c(),Pt.m(e,xt)))},d(t){t&&f(e),Pt.d()}}}function nt(e){let n,r,o,i=e[0],c=[];for(let t=0;t<i.length;t+=1)c[t]=et(Y(e,i,t));return{c(){n=d("h1"),n.textContent="History",r=g(),o=d("ul");for(let t=0;t<c.length;t+=1)c[t].c()},m(t,e){u(t,n,e),u(t,r,e),u(t,o,e);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(o,null)},p(t,[e]){if(1&e){let n;for(i=t[0],n=0;n<i.length;n+=1){const r=Y(t,i,n);c[n]?c[n].p(r,e):(c[n]=et(r),c[n].c(),c[n].m(o,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=i.length}},i:t,o:t,d(t){t&&f(n),t&&f(r),t&&f(o),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(c,t)}}}function rt(t,e,n){let r=[];async function o(t,e){try{const o=await fetch("/picture/"+t);if(!o.ok)throw new Error("No picture found: "+o.statusText);const i=await o.blob();n(0,r[e].imageUrl=URL.createObjectURL(i),r)}catch(t){console.error("Fetch error:",t),n(0,r[e].imageUrl=null,r)}}return b((async()=>{await async function(){try{const t=await fetch("/history");if(t.ok){const e=await t.json();n(0,r=JSON.parse(e));for(let t=0;t<r.length;t++)await o(r[t].pictureId,t);console.log(r[0])}else console.error("Failed to fetch requests.")}catch(t){console.error("Error fetching data:",t)}}()})),[r]}class ot extends M{constructor(t){super(),H(this,t,rt,nt,i,{})}}function it(e){let n,r,o;return r=new ot({}),{c(){n=d("main"),T(r.$$.fragment),h(n,"class","svelte-28qcwf")},m(t,e){u(t,n,e),A(r,n,null),o=!0},p:t,i(t){o||(j(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&f(n),B(r)}}}class ct extends M{constructor(t){super(),H(this,t,null,it,i,{})}}function at(t){let e,n;return e=new X({}),{c(){T(e.$$.fragment)},m(t,r){A(e,t,r),n=!0},i(t){n||(j(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function lt(t){let e,n;return e=new ct({}),{c(){T(e.$$.fragment)},m(t,r){A(e,t,r),n=!0},i(t){n||(j(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function st(t){let e,n,o,i,c,a,l,$,x,y,w,b,v,C,_="main"===t[0]&&at(),D="history"===t[0]&&lt();return{c(){e=d("nav"),n=d("div"),o=d("h1"),o.textContent="Lens less",i=g(),c=d("div"),a=d("a"),a.textContent="Main",l=g(),$=d("a"),$.textContent="History",x=g(),_&&_.c(),y=g(),D&&D.c(),w=p(""),h(o,"class","svelte-3716tx"),h(a,"href","#"),h(a,"class","svelte-3716tx"),h($,"href","#"),h($,"class","svelte-3716tx"),h(c,"class","svelte-3716tx"),h(n,"class","navbar svelte-3716tx"),h(e,"class","svelte-3716tx")},m(r,f){u(r,e,f),s(e,n),s(n,o),s(n,i),s(n,c),s(c,a),s(c,l),s(c,$),u(r,x,f),_&&_.m(r,f),u(r,y,f),D&&D.m(r,f),u(r,w,f),b=!0,v||(C=[m(a,"click",t[2]),m($,"click",t[3])],v=!0)},p(t,[e]){"main"===t[0]?_?1&e&&j(_,1):(_=at(),_.c(),j(_,1),_.m(y.parentNode,y)):_&&(F(),z(_,1,1,(()=>{_=null})),U()),"history"===t[0]?D?1&e&&j(D,1):(D=lt(),D.c(),j(D,1),D.m(w.parentNode,w)):D&&(F(),z(D,1,1,(()=>{D=null})),U())},i(t){b||(j(_),j(D),b=!0)},o(t){z(_),z(D),b=!1},d(t){t&&f(e),t&&f(x),_&&_.d(t),t&&f(y),D&&D.d(t),t&&f(w),v=!1,r(C)}}}function ut(t,e,n){let r="main";function o(t){n(0,r=t)}return[r,o,()=>o("main"),()=>o("history")]}return new class extends M{constructor(t){super(),H(this,t,ut,st,i,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
